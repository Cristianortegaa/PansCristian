<div class="container py-5 justify-content-center text-center">
  
  <div class="text-center mb-5">
    <div class="d-inline-block p-3 rounded-circle bg-white shadow-sm mb-3">
      <i class="fa-solid fa-store text-warning" style="font-size: 3rem;"></i>
    </div>
    <h1 class="display-4 fw-bold">{{ infoPanaderia.nombre }}</h1>
    <p class="text-muted fs-5">
      <i class="fa-solid fa-location-dot text-danger"></i> {{ infoPanaderia.direccion }} 
      <span class="mx-2">|</span> 
      <i class="fa-solid fa-phone text-primary"></i> {{ infoPanaderia.telefono }}
    </p>
  </div>

  <div class="row g-4">
    
    <div class="col-lg-4">
      <div class="card card-custom p-4 h-100">
        <h4 class="mb-4 border-bottom pb-2">
          <i class="fa-solid fa-bread-slice text-warning me-2"></i> Nuevo Pedido
        </h4>
        
        <div class="row g-3">
          <div class="col-12">
            <div class="form-floating">
              <select class="form-select" id="sel1" [(ngModel)]="productoSeleccionado">
                <option *ngFor="let p of productos" [ngValue]="p">
                  {{ p.nombre }} ({{ p.precio | currency:'EUR':'symbol':'1.2-2' }})
                </option>
              </select>
              <label for="sel1">Selecciona Producto</label>
            </div>
          </div>

          <div class="col-6">
            <div class="form-floating">
              <input type="text" class="form-control bg-light" id="in1" 
                     [value]="productoSeleccionado.precio | currency:'EUR':'symbol':'1.2-2'" readonly>
              <label for="in1">Precio</label>
            </div>
          </div>

          <div class="col-6">
            <div class="form-floating">
              <input type="number" class="form-control" id="in2" [(ngModel)]="cantidadInput" min="1">
              <label for="in2">Cantidad</label>
            </div>
          </div>

          <div class="col-12 mt-4">
            <button class="btn btn-success w-100 shadow" (click)="agregarProducto()">
              <i class="fa-solid fa-plus me-2"></i> Añadir a la cesta
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="card card-custom p-0">
        
        <div class="table-responsive">
          <table class="table table-custom table-hover mb-0">
            <thead>
              <tr>
                <th class="ps-4">Producto</th>
                <th>Precio</th>
                <th>Cant.</th>
                <th>Subtotal</th>
                <th class="text-center">Eliminar</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="carrito.length === 0">
                <td colspan="5" class="text-center py-5 text-muted">
                  <i class="fa-solid fa-basket-shopping" style="font-size: 2rem; opacity: 0.5;"></i>
                  <p class="mt-2 mb-0">La cesta está vacía</p>
                </td>
              </tr>

              <tr *ngFor="let item of carrito">
                <td class="ps-4 fw-bold">{{ item.producto.nombre }}</td>
                
                <td class="text-muted">
                    {{ item.producto.precio | currency:'EUR' }}
                </td>
                
                <td><span class="badge bg-light text-dark border">{{ item.cantidad }}</span></td>
                
                <td class="fw-bold text-success">
                    {{ (item.producto.precio * item.cantidad) | currency:'EUR' }}
                </td>
                
                <td class="text-center">
                  <div class="form-check d-flex justify-content-center">
                    <input type="checkbox" [(ngModel)]="item.seleccionado" class="form-check-input" style="transform: scale(1.3);">
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card-footer bg-white border-0 p-4">
            <div class="total-panel p-4 d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
                <div class="text-center text-md-start">
                    <span class="d-block text-white-50 small text-uppercase">Total a pagar</span>
                    
                    <span class="display-6 fw-bold">
                        {{ totalGeneral | currency:'EUR'}}
                    </span>
                    
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-danger text-white shadow-sm" (click)="borrarSeleccionados()" *ngIf="carrito.length > 0">
                        <i class="fa-solid fa-trash"></i> Borrar
                    </button>
                    <button class="btn btn-warning text-dark fw-bold shadow-sm" (click)="imprimirTicket()" [disabled]="carrito.length === 0">
                        <i class="fa-solid fa-receipt"></i> Imprimir Ticket
                    </button>

                    <button class="btn btn-secondary text-white shadow-sm ms-2" (click)="verTicketAnterior()">
                        <i class="fa-solid fa-clock-rotate-left"></i> Ver Último
                    </button>
                </div>
            </div>
        </div>

      </div>
    </div>
  </div>
</div>